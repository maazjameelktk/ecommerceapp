<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Welcome - E-Commerce App</title>
<style>
body{font-family:Arial,sans-serif;background:#3498db;color:#fff;text-align:center;padding:40px;}
h1{font-size:2.5em;margin-bottom:40px;overflow:hidden;border-right:.15em solid #fff;white-space:nowrap;animation:typing 3s steps(30,end),blink .75s step-end infinite;}
@keyframes typing{from{width:0}to{width:100%}}@keyframes blink{50%{border-color:transparent}}
.tabs{display:flex;gap:10px;justify-content:center;margin-bottom:20px;}
.tab{padding:10px 20px;cursor:pointer;background:rgba(255,255,255,0.2);border-radius:5px;}
.tab.active{background:#2ecc71;font-weight:bold;}
form{display:none;flex-direction:column;background:rgba(255,255,255,0.1);padding:20px;border-radius:10px;width:300px;text-align:center;}
form.active{display:flex;}
input{margin:10px 0;padding:10px;border:none;border-radius:5px;width:90%;}
button{padding:10px;border:none;border-radius:5px;background:#2ecc71;color:#fff;cursor:pointer;margin-top:10px;width:100%;}
.forgot-link{margin-top:10px;font-size:.9em;color:#f1c40f;cursor:pointer;text-decoration:underline;}
p.response{color:yellow;font-weight:bold;margin-top:10px;}
#forgotModal{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.6);display:none;align-items:center;justify-content:center;}
#forgotModal form{width:300px;background:#2980b9;padding:30px;border-radius:10px;position:relative;}
#closeModal{position:absolute;top:10px;right:15px;font-size:20px;cursor:pointer;color:#fff;}
</style>
</head>
<body>
<h1>Welcome to Our App</h1>
<div class="tabs">
  <div class="tab active" data-target="signupForm">Sign Up</div>
  <div class="tab" data-target="loginForm">Login</div>
</div>

<form id="signupForm" class="active">
  <input type="text" id="signup_name" placeholder="Full Name" required>
  <input type="email" id="signup_email" placeholder="Email" required>
  <input type="password" id="signup_password" placeholder="Password" required>
  <button type="submit">Sign Up</button>
  <div class="forgot-link" onclick="openForgot()">Forgot Password?</div>
  <p class="response" id="signup_response"></p>
</form>

<form id="loginForm">
  <input type="email" id="login_email" placeholder="Email" required>
  <input type="password" id="login_password" placeholder="Password" required>
  <button type="submit">Login</button>
  <div class="forgot-link" onclick="openForgot()">Forgot Password?</div>
  <p class="response" id="login_response"></p>
</form>

<div id="forgotModal">
  <form id="forgotForm">
    <div id="closeModal" onclick="closeForgot()">&times;</div>
    <h2>Forgot Password</h2>
    <input type="email" id="forgot_email" placeholder="Email" required>
    <button type="submit">Reset Password</button>
    <p class="response" id="forgot_response"></p>
  </form>
</div>

<script>
const tabs = document.querySelectorAll(".tab");
const forms = document.querySelectorAll("form:not(#forgotForm)");
tabs.forEach(tab => {
  tab.addEventListener("click", () => {
    tabs.forEach(t => t.classList.remove("active"));
    tab.classList.add("active");
    forms.forEach(f => f.classList.remove("active"));
    document.getElementById(tab.dataset.target).classList.add("active");
  });
});
const forgotModal = document.getElementById("forgotModal");
function openForgot(){forgotModal.style.display="flex";}
function closeForgot(){forgotModal.style.display="none";}

// Signup
document.getElementById("signupForm").addEventListener("submit", async function(e){
  e.preventDefault();
  const res = await fetch("api/signup.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({
    full_name:document.getElementById("signup_name").value,
    email:document.getElementById("signup_email").value,
    password:document.getElementById("signup_password").value
  })});
  const data = await res.json();
  document.getElementById("signup_response").innerText=data.message;
  if(data.success){
    localStorage.setItem("userName", data.full_name);
    setTimeout(()=>window.location.href="app.html",2000);
  }
});

// Login
document.getElementById("loginForm").addEventListener("submit", async function(e){
  e.preventDefault();
  const res = await fetch("api/login.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({
    email:document.getElementById("login_email").value,
    password:document.getElementById("login_password").value
  })});
  const data = await res.json();
  document.getElementById("login_response").innerText=data.message;
  if(data.success){
    localStorage.setItem("userName", data.full_name);
    setTimeout(()=>window.location.href="app.html",2000);
  }
});

// Forgot Password
document.getElementById("forgotForm").addEventListener("submit", async function(e){
  e.preventDefault();
  const res = await fetch("api/forgot_password.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({
    email:document.getElementById("forgot_email").value
  })});
  const data = await res.json();
  document.getElementById("forgot_response").innerText=data.message+(data.reset_token?" Token: "+data.reset_token:"");
});
forgotModal.addEventListener("click",e=>{if(e.target===forgotModal) closeForgot();});
</script>
</body>
</html>
